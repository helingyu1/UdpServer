package com.bupt.testclient;

import java.io.UnsupportedEncodingException;
import java.util.Arrays;

import com.bupt.utils.Helper;

public class EchoClient {

	/**
	 * @param args
	 * @throws UnsupportedEncodingException 
	 * @throws InterruptedException 
	 */
	public static void main(String[] args) throws UnsupportedEncodingException, InterruptedException {
		// TODO Auto-generated method stub
		// 初始化本地UDP的Socket
		LocalUDPSocketProvider.getInstance().initSocket();
		// 启动本地UDP监听（接收数据用的）
		LocalUDPDataReciever.getInstance().startup();

		// 循环发送数据给服务端
		while (true) {
			// 要发送的数据
//			String toServer="6300000000000000000000000000000000000000";//服务器是否在线
//			byte[] soServerBytes = toServer.getBytes("UTF-8");
//			byte[] aa = {0x63,0x63,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
			
			byte[] b = {0x63,0x63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x63};
//			 byte[] b = {0x02,0x01,(byte)0xC8,(byte)0xB4,0x00,0x00,0x00,0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00 ,0x1A ,(byte)0xFE ,0x34 ,(byte)0xF7 ,0x6A ,0x14 ,(byte)0xAE ,(byte)0xE5 ,0x38 ,(byte)0xE3 ,(byte)0xBC ,0x7F ,0x3A ,0x2D ,(byte)0x85 ,0x18 ,0x03 ,0x36 ,(byte)0xD2 ,(byte)0xCB ,(byte)0xF6 ,(byte)0xE1};

//			 byte[] b = {(byte)0x82, 0x01, (byte)0x84, (byte)0xF7, 0x00, 0x00, 0x00, 0x00, (byte)0xA6, 0x6F, 0x44, (byte)0xE7, 0x23, 0x52, 0x1A, (byte)0xFE, 0x34, (byte)0xF7, 0x6A, 0x14, 0x7B, 0x22, 0x6D, 0x6F, 0x64, 0x65, 0x6C, 0x22, 0x3A, 0x22, 0x69, 0x6E, 0x50, 0x6C, 0x75, 0x67, 0x2D, 0x53, 0x33, 0x2E, 0x30, 0x2D, 0x67, 0x61, 0x74, 0x65, 0x22, 0x2C, 0x22, 0x66, 0x69, 0x72, 0x6D, 0x77, 0x61, 0x72, 0x65, 0x22, 0x3A, 0x22, 0x30, 0x2E, 0x30, 0x2E, 0x31, 0x22, 0x2C, 0x22, 0x63, 0x6F, 0x6D, 0x70, 0x69, 0x6C, 0x65, 
//					 0x22, 0x3A,0x22, 0x32, 0x30, 0x31, 0x36, 0x2D, 0x30, 0x36, 0x2D, 0x30, 0x35, 0x22, 0x7D};
			 //			char[] aa = {0x63,0xe0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x63};
//			byte[] b = Helper.getBytes(aa);
//			System.out.println("客户端转后的byte数组："+Arrays.toString(b));
//			System.out.println("重新转成char数组："+Arrays.toString(Helper.getChars(b)));
// 开始发送
//			boolean ok = UDPUtils.send(soServerBytes, soServerBytes.length);
			boolean ok = UDPUtils.send(b, b.length);
			if (ok){
				System.out.println("发往服务端的信息已送出.");
			}
			else
				System.out.println("发往服务端的信息没有成功发出！！！");

			// 3000秒后进入下一次循环
			Thread.sleep(100000);
		}

	}

}
